[
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-04-10 17:21:14.634321",
  "module": "Mantra Dev",
  "name": "Indentify Vch subtype for Gl entry.",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "GL Entry",
  "script": "if doc.voucher_type == \"Sales Invoice\":\n    isreturn = frappe.db.get_value(\"Sales Invoice\",doc.voucher_no,'is_return')\n    isdebitnote = frappe.db.get_value(\"Sales Invoice\",doc.voucher_no,'is_debit_note')\n    if isreturn == 0 and isdebitnote == 0:\n        doc.voucher_subtype = frappe.db.get_value(\"Sales Invoice\",doc.voucher_no,'custom_invoice_type')\n\nif doc.voucher_type == \"Purchase Invoice\":\n    isreturn = frappe.db.get_value(\"Purchase Invoice\",doc.voucher_no,'is_return')\n    if isreturn == 0:\n        doc.voucher_subtype = frappe.db.get_value(\"Purchase Invoice\",doc.voucher_no,'custom_invoice_type')",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-08-28 16:58:47.054557",
  "module": "Mantra Dev",
  "name": "Set Income Account To SI After Save",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Sales Invoice",
  "script": "if doc.is_return == 0 or doc.update_outstanding_for_self == 0:\n    if doc.tax_category:\n        for item in doc.items:\n                company = frappe.db.get_value('Account Default', {'parent': doc.tax_category},'company')\n                if company:\n                    inc_default = frappe.db.get_value('Item Default', {'parent': item.item_code,'company': doc.company}, 'income_account')\n                    export_sales_account = frappe.db.get_value('Account Default', {'parent': doc.tax_category,'income_account':inc_default,'company': doc.company}, 'export_sales_account')\n                    if export_sales_account is not None and inc_default == item.income_account:\n                        item.income_account = export_sales_account\n                    else:\n                        item.income_account = inc_default\n                else:\n                    inc_default = frappe.db.get_value('Item Default', {'parent': item.item_code,'company': doc.company}, 'income_account')\n                    if inc_default:\n                        item.income_account = inc_default\n                    else: \n                        default_income_account = frappe.db.get_value('Company', {'name': doc.company}, 'default_income_account')\n                        item.income_account = default_income_account\n    else:\n        pass\nelse:\n    pass",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": "warehouse_manager_data_fetch_material_request",
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-04-10 17:21:14.746952",
  "module": "Mantra Dev",
  "name": "Warehouse Manager Data Fetch in Material Request",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": null,
  "script": "warehouse=frappe.form_dict[\"warehouse\"]\n\nwarehouse_manager = []\n\nwm = frappe.db.sql(\"select warehouse_manager from `tabWarehouse Manager` where parent = %s \",(warehouse))\n            \n# for record in wm:\n#         warehouse_manager.append(record)\n\nfrappe.response[\"message\"] = wm",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "warehouse_manager_data_fetch_stock_entry",
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-04-10 17:21:14.792850",
  "module": "Mantra Dev",
  "name": "Warehouse Manager Data Fetch in Stock Entry",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": null,
  "script": "mr_no = frappe.form_dict[\"mr_no\"]\ntw = frappe.db.sql(\"SELECT set_warehouse FROM `tabMaterial Request` WHERE name = %s\", (mr_no,))\n\nset_tw = tw[0][0]  # Extracting the value from the first tuple in the list\n# frappe.msgprint(set_tw)\n\nwarehouse_manager = []\n\nwm = frappe.db.sql(\"select warehouse_manager from `tabWarehouse Manager` where parent = %s \", (set_tw,))\n\n# for record in wm:\n#     warehouse_manager.append(record[\"warehouse_manager\"])\n\n# Assign the string to frappe.response[\"message\"]\nfrappe.response[\"message\"] = wm\n\n# frappe.msgprint(warehouse_manager_str)",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "get_party_name",
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-07-08 18:26:14.383849",
  "module": "Mantra Dev",
  "name": "Payment Request fetching party_name",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": null,
  "script": "party_type = frappe.form_dict[\"party_type\"]\nparty = frappe.form_dict[\"party\"]\nref_type = frappe.form_dict[\"ref_type\"]\nref_name = frappe.form_dict[\"ref_name\"]\n\nif party_type == \"Supplier\":\n    sup_name = frappe.db.sql(\"select supplier_name from `tabSupplier` where name = %s \", (party), as_dict = True)\n    if sup_name :\n        supplier_name = sup_name[0][\"supplier_name\"]\n        frappe.response[\"message\"] = supplier_name\nelif party_type == \"Customer\":\n    cust_name = frappe.db.sql(\"select customer_name from `tabCustomer` where name = %s \", (party), as_dict = True)\n    if cust_name :\n        customer_name = cust_name[0][\"customer_name\"]\n        frappe.response[\"message\"] = customer_name\nelif party_type == \"Employee\":\n    emp_name = frappe.db.sql(\"select employee_name from `tabEmployee` where name = %s \", (party), as_dict = True)\n    if emp_name :\n        employee_name = emp_name[0][\"employee_name\"]\n        frappe.response[\"message\"] = employee_name\nelse:\n    extra = \" \"\n    \nif ref_type == \"Purchase Invoice\":\n    ref_pi = frappe.db.sql(\"select custom_invoice_type from `tabPurchase Invoice` where name = %s \", (ref_name), as_dict = True)\n    if ref_pi:\n        refpi = ref_pi[0][\"custom_invoice_type\"]\n        frappe.response[\"ref\"] = refpi\nelif ref_type == \"Purchase Order\":\n    ref_po = frappe.db.sql(\"select custom_purchase_type from `tabPurchase Order` where name = %s \", (ref_name), as_dict = True)\n    if ref_po:\n        refpo = ref_po[0][\"custom_purchase_type\"]\n        frappe.response[\"ref\"] = refpo\nelse:\n    extra = \" \"",
  "script_type": "API"
 }
]